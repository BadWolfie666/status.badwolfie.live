<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=5,user-scalable=yes" />
  <title>badwolfie.live — Status</title>
  <meta property="og:title" content="badwolfie.live — Status" />
  <meta property="og:description" content="Status page for badwolfie.live" />
  <meta property="og:image" content="/favicon.png" />
  <meta name="theme-color" content="#0b0b12" />
  <link rel="icon" href="./favicon.png" type="image/png" />

  <style>
    @font-face {
      font-family: Inter;
      font-style: normal;
      font-weight: 400 700;
      src: local("Inter");
      font-display: swap;
    }
  </style>

  <style>
    :root{
      --bg:#000;
      --glass-bg: rgba(255,255,255,.06);
      --glass-brd: rgba(255,255,255,.14);
      --accent:#bb9af7;
      --text:#fff;
      --muted:#c0caf5;
      --grid:#333;
      --ok:#38d27a;
      --warn:#ffcf5a;
      --danger:#ff5a6b;
    }
    *{box-sizing:border-box;margin:0;padding:0}
    html,body{height:100%}
    body{
      background: var(--bg);
      color: var(--text);
      font-family: Inter, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
      overflow-x:hidden;
      position:relative;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      -webkit-tap-highlight-color: transparent;
    }
    body::before{
      content:"";
      position:fixed; inset:0;
      background:
        radial-gradient(1200px 600px at 20% 50%, rgba(96,40,74,.10), transparent 60%),
        radial-gradient(900px 500px at 80% 20%, rgba(67,81,119,.10), transparent 60%),
        radial-gradient(800px 800px at 40% 80%, rgba(255,255,255,.05), transparent 60%);
      z-index:-2;
      pointer-events:none;
    }

    #bg{ position:fixed; inset:0; z-index:-1; pointer-events:none; }

    .cte{
      position:fixed; inset:0;
      background: rgba(0,0,0,.9);
      backdrop-filter: blur(10px);
      display:flex; flex-direction:column; align-items:center; justify-content:center;
      z-index:1000;
      transition: opacity .6s ease;
      gap:16px;
    }
    .cte.fade-out{opacity:0; pointer-events:none}
    .cte-btn{
      font:600 1.1rem/1 Inter,system-ui,sans-serif;
      color:#fff; padding:14px 28px; border-radius:12px;
      border:1px solid rgba(187,154,247,.35);
      background: linear-gradient(180deg, rgba(255,255,255,.05), rgba(255,255,255,.02));
      box-shadow: 0 10px 24px rgba(0,0,0,.35), 0 0 24px rgba(187,154,247,.15) inset;
      cursor:pointer; transition: transform .15s ease, box-shadow .2s ease, border-color .2s ease;
      -webkit-tap-highlight-color: transparent; touch-action: manipulation;
    }
    .cte-btn:hover{ transform: translateY(-2px); border-color: rgba(187,154,247,.6); box-shadow: 0 14px 30px rgba(0,0,0,.44), 0 0 30px rgba(187,154,247,.25) inset; }

    .container{max-width:1100px;margin:0 auto;padding:28px}
    .hdr{text-align:center;margin:8px 0 24px 0}
    .ascii{
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      white-space:pre; font-size:.58rem; line-height:1.15;
      display:inline-block; position:relative; user-select:text; color:#eaeaea;
    }
    .ascii:after{
      content:""; position:absolute; left:50%; bottom:-10px; transform:translateX(-50%);
      width:82%; height:3px; border-radius:2px; background: linear-gradient(90deg, var(--accent), rgba(255,255,255,.35)); opacity:.8;
    }
    .tagline{ margin-top:18px; color:var(--muted); font-size:.98rem; }

    .section-title{ text-align:center; font-weight:700; letter-spacing:.02em; color:#e8e8ff; margin:26px 0 14px 0; font-size:1.15rem; }
    .sep{height:1px; background:var(--grid); margin:20px 0 18px 0; opacity:.6}

    .glass{
      background: var(--glass-bg);
      border:1px solid var(--glass-brd);
      border-radius:16px;
      backdrop-filter: blur(18px);
      -webkit-backdrop-filter: blur(18px);
      box-shadow: 0 10px 25px rgba(0,0,0,.35), inset 0 0 0 1px rgba(255,255,255,.02);
      transition: transform .2s ease, box-shadow .2s ease;
    }
    .glass:hover{ transform: translateY(-2px); box-shadow: 0 14px 32px rgba(0,0,0,.45), inset 0 0 0 1px rgba(255,255,255,.04); }

    .servers-grid{ display:grid; gap:16px; grid-template-columns: 1fr; }
    @media (min-width: 820px){ .servers-grid{grid-template-columns: 1fr 1fr;} }
    .server{ padding:16px 16px 14px 16px; }
    .server-head{ display:flex; align-items:center; justify-content:space-between; gap:12px; margin-bottom:10px; }
    .server-name{ display:flex; flex-direction:column; }
    .server-name b{font-size:1rem; letter-spacing:.02em}
    .server-name span{font-size:.82rem; color:var(--muted)}
    .status{
      display:flex; align-items:center; gap:8px; font-weight:600; font-size:.9rem; letter-spacing:.01em;
      padding:8px 10px; border-radius:12px; border:1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.03); transition: all .3s ease;
    }
    .dot{ width:10px;height:10px;border-radius:50%; box-shadow:0 0 12px currentColor; animation: pulse 2s ease-in-out infinite; }
    @keyframes pulse { 0%, 100% { transform: scale(1); opacity:1; } 50% { transform: scale(1.1); opacity:.8; } }
    .ok .dot{color:var(--ok)}
    .ok.status{border-color:rgba(56,210,122,.35); background: rgba(56,210,122,.05);}

    .kpis{ display:grid; grid-template-columns: repeat(3, minmax(0,1fr)); gap:12px; margin:10px 0 8px 0; }
    .kpi{ padding:10px; border-radius:12px; border:1px solid rgba(255,255,255,.08); background:rgba(255,255,255,.025); text-align:center; transition: all .2s ease; }
    .kpi:hover{ border-color: rgba(187,154,247,.3); background:rgba(255,255,255,.04); }
    .kpi .label{display:block; font-size:.75rem; color:#b7c2ff; margin-bottom:4px; letter-spacing:.03em}
    .kpi .value{font-size:1.05rem; font-weight:700}

    .uptime{ margin-top:10px; }
    .uptime-row{ display:flex; align-items:center; justify-content:space-between; margin-bottom:6px; color:#dfe1ff; font-size:.85rem; }
    .bar{ position:relative; height:9px; border-radius:999px; background:rgba(255,255,255,.06); overflow:hidden; border:1px solid rgba(255,255,255,.10); }
    .bar>span{
      display:block; height:100%; background: linear-gradient(90deg, rgba(187,154,247,.9), rgba(187,154,247,.55));
      width:0%; transition: width .6s ease; box-shadow: 0 0 18px rgba(187,154,247,.35);
    }

    #apiCard{padding:14px}
    #apiChart{width:100%; height:280px}
    .card-title{ display:flex; align-items:center; justify-content:space-between; margin-bottom:8px; font-weight:700; color:#e8e8ff; }

    .music-ctrl{
      position:fixed; bottom:20px; right:20px; z-index:999;
      display:flex; gap:8px; align-items:center; padding:10px 14px; border-radius:12px;
      background: rgba(255,255,255,.05); border:1px solid rgba(187,154,247,.35);
      backdrop-filter: blur(18px); box-shadow: 0 6px 18px rgba(0,0,0,.3);
      font-size:.85rem; color:#fff; opacity:0; transition: opacity .3s ease;
    }
    .music-ctrl.show{opacity:1}
    .music-btn{
      width:32px; height:32px; border-radius:8px; border:1px solid rgba(187,154,247,.4);
      background: rgba(187,154,247,.1); cursor:pointer; display:flex; align-items:center; justify-content:center;
      transition: all .2s ease; color:#bb9af7; -webkit-tap-highlight-color: transparent; touch-action: manipulation;
    }
    .music-btn:hover{ background: rgba(187,154,247,.2); border-color: rgba(187,154,247,.6); }

    .footer{
      margin-top:22px; padding:14px 16px;
      display:flex; align-items:center; justify-content:space-between;
      font-size:.9rem; color:#d8d8ff;
    }
    .footer a{color:var(--accent); text-decoration:none; transition: color .2s ease;}
    .footer a:hover{color:#d4b5ff;}

    .wel-toast{
      position:fixed; left:50%; bottom:28px; transform:translateX(-50%);
      padding:10px 14px; border-radius:12px; background: rgba(255,255,255,.05);
      border:1px solid rgba(187,154,247,.35); backdrop-filter: blur(18px);
      color:#fff; z-index:1200; opacity:0; transition:opacity .25s ease;
      box-shadow: 0 10px 24px rgba(0,0,0,.35), 0 0 22px rgba(187,154,247,.15) inset;
      pointer-events:none;
    }

    @media (max-width:560px){
      .ascii{font-size:.46rem}
      .kpis{grid-template-columns: repeat(3,1fr)}
      .footer{flex-direction:column; gap:8px; text-align:center}
      .music-ctrl{bottom:10px; right:10px; font-size:.75rem; padding:8px 10px;}
    }
  </style>

  <script src="https://code.highcharts.com/highcharts.js"></script>
</head>
<body>
  <canvas id="bg"></canvas>

  <div id="cte" class="cte">
    <button class="cte-btn" aria-label="Click to Enter">Click to Enter</button>
  </div>

  <div class="container">
    <div class="hdr">
      <div class="ascii">
██████╗  █████╗ ██████╗ ██╗    ██╗ ██████╗ ██╗    ███████╗██╗███████╗    ██╗     ██╗██╗   ██╗███████╗
██╔══██╗██╔══██╗██╔══██╗██║    ██║██╔═══██╗██║    ██╔════╝██║██╔════╝    ██║     ██║██║   ██║██╔════╝
██████╔╝███████║██║  ██║██║ █╗ ██║██║   ██║██║    █████╗  ██║█████╗   ██╗██║     ██║██║   ██║█████╗  
██╔══██╗██╔══██║██║  ██║██║███╗██║██║   ██║██║    ██╔══╝  ██║██╔══╝   ╚═╝██║     ██║╚██╗ ██╔╝██╔══╝  
██████╔╝██║  ██║██████╔╝╚███╔███╔╝╚██████╔╝███████╗██║     ██║███████╗    ███████╗██║ ╚████╔╝ ███████╗
╚═════╝ ╚═╝  ╚═╝╚═════╝  ╚══╝╚══╝  ╚═════╝ ╚══════╝╚═╝     ╚═╝╚══════╝    ╚══════╝╚═╝  ╚═══╝  ╚══════╝
      </div>
      <div class="tagline">Real-time status for <b>badwolfie.live</b></div>
    </div>

    <div class="sep"></div>

    <h2 class="section-title">Server Infrastructure</h2>
    <div class="servers-grid">
      <div id="srvA" class="server glass">
        <div class="server-head">
          <div class="server-name">
            <b>Dallas, Texas</b>
            <span>Primary Server</span>
          </div>
          <div class="status ok" data-role="status">
            <span class="dot"></span><span data-role="status-text">Operational</span>
          </div>
        </div>
        <div class="kpis">
          <div class="kpi">
            <span class="label">Ping (ms)</span>
            <span class="value" data-role="ping">--</span>
          </div>
          <div class="kpi">
            <span class="label">Load</span>
            <span class="value" data-role="load">--%</span>
          </div>
          <div class="kpi">
            <span class="label">Uptime</span>
            <span class="value" data-role="uptimeTxt">99.97%</span>
          </div>
        </div>
        <div class="uptime">
          <div class="uptime-row">
            <span>30-Day Uptime</span>
            <span data-role="uptimeTxt2">99.97%</span>
          </div>
          <div class="bar"><span data-role="uptimeBar" style="width:99.97%"></span></div>
        </div>
      </div>

      <div id="srvB" class="server glass">
        <div class="server-head">
          <div class="server-name">
            <b>San Francisco, California</b>
            <span>Backup Server</span>
          </div>
          <div class="status ok" data-role="status">
            <span class="dot"></span><span data-role="status-text">Operational</span>
          </div>
        </div>
        <div class="kpis">
          <div class="kpi">
            <span class="label">Ping (ms)</span>
            <span class="value" data-role="ping">--</span>
          </div>
          <div class="kpi">
            <span class="label">Load</span>
            <span class="value" data-role="load">--%</span>
          </div>
          <div class="kpi">
            <span class="label">Uptime</span>
            <span class="value" data-role="uptimeTxt">99.91%</span>
          </div>
        </div>
        <div class="uptime">
          <div class="uptime-row">
            <span>30-Day Uptime</span>
            <span data-role="uptimeTxt2">99.91%</span>
          </div>
          <div class="bar"><span data-role="uptimeBar" style="width:99.91%"></span></div>
        </div>
      </div>
    </div>

    <h2 class="section-title" style="margin-top:22px">BadWolf API Performance</h2>
    <div id="apiCard" class="glass">
      <div class="card-title">
        <span>Requests per Second</span>
        <span style="font-size:.85rem;font-weight:400;color:#b7c2ff">Live Data</span>
      </div>
      <div id="apiChart"></div>
    </div>

    <div class="footer glass">
      <div><a href="https://badwolfie.live" target="_blank" rel="noopener" style="text-decoration:none;color:#d8d8ff">Powered by BadWolfNetworks © 2025</a></div>
      <div style="display:flex;gap:12px">
        <a href="https://github.com/udpcat" target="_blank" rel="noopener">Hex (udpcat)</a>
        <a href="https://guns.badwolfie.live" target="_blank" rel="noopener">guns.badwolfie.live</a>
      </div>
    </div>
  </div>

  <div class="music-ctrl" id="musicCtrl">
    <button class="music-btn" id="playBtn" title="Play/Pause">▶</button>
    <span>🎵 Music</span>
  </div>

  <!-- Self-hosted audio -->
  <audio id="audioPlayer" loop preload="auto">
    <source src="/audio.mp3" type="audio/mpeg">
  </audio>

  <script>
    /* Background constellation canvas */
    (function(){
      const canvas = document.getElementById('bg');
      const ctx = canvas.getContext('2d');
      let W=innerWidth, H=innerHeight;
      let pts=[], N=70, D=130;

      function resize(){ W=innerWidth; H=innerHeight; canvas.width=W; canvas.height=H; init(); }
      function randCol(){ const cols=['#60284A','#435177','#FFFFFF','#bb9af7']; return cols[Math.floor(Math.random()*cols.length)]; }
      function init(){
        pts.length=0;
        for(let i=0;i<N;i++){
          pts.push({ x:Math.random()*W, y:Math.random()*H, vx:(Math.random()-.5)*.35, vy:(Math.random()-.5)*.35, c:randCol() });
        }
      }
      function draw(){
        ctx.clearRect(0,0,W,H);
        for(let i=0;i<pts.length;i++){
          const p=pts[i];
          p.x+=p.vx; p.y+=p.vy;
          if(p.x<0||p.x>W) p.vx*=-1;
          if(p.y<0||p.y>H) p.vy*=-1;
          ctx.beginPath(); ctx.arc(p.x,p.y,1.2,0,Math.PI*2); ctx.fillStyle=p.c; ctx.fill();
          for(let j=i+1;j<pts.length;j++){
            const q=pts[j], dx=p.x-q.x, dy=p.y-q.y, dist=Math.hypot(dx,dy);
            if(dist<D){
              const g=ctx.createLinearGradient(p.x,p.y,q.x,q.y);
              g.addColorStop(0,p.c); g.addColorStop(1,q.c);
              ctx.beginPath(); ctx.moveTo(p.x,p.y); ctx.lineTo(q.x,q.y);
              ctx.strokeStyle=g; ctx.lineWidth=.35*(1 - dist/D); ctx.stroke();
            }
          }
        }
        requestAnimationFrame(draw);
      }
      addEventListener('resize', resize);
      resize(); draw();
    })();

    /* Click-to-enter + music (starts at ~30% volume) */
    (function(){
      const gate = document.getElementById('cte');
      const musicCtrl = document.getElementById('musicCtrl');
      const playBtn = document.getElementById('playBtn');
      const audio = document.getElementById('audioPlayer');
      let isPlaying = false;

      audio.volume = 0.3; // ~30%

      gate.addEventListener('click', ()=>{
        gate.classList.add('fade-out');
        audio.play().then(()=>{
          isPlaying = true; playBtn.textContent = '⏸';
        }).catch(()=>{});
        setTimeout(()=>{ gate.style.display='none'; musicCtrl.classList.add('show'); }, 600);

        const t=document.createElement('div'); t.className='wel-toast';
        t.textContent='🐺 Welcome to status.badwolfie.live';
        document.body.appendChild(t);
        requestAnimationFrame(()=> t.style.opacity='1');
        setTimeout(()=>{ t.style.opacity='0'; setTimeout(()=>t.remove(), 250); }, 2500);
      }, { once:true });

      playBtn.addEventListener('click', ()=>{
        if(isPlaying){ audio.pause(); playBtn.textContent='▶'; isPlaying=false; }
        else { audio.play(); playBtn.textContent='⏸'; isPlaying=true; }
      });
    })();

    /* Telemetry (Primary > Backup, fair→high activity, status always Operational) */
    (function(){
      const clamp=(v,min,max)=>Math.max(min,Math.min(max,v));
      const fmt=(n,d=2)=>Number(n).toFixed(d);

      function bindServer(root, init){
        const q = (sel)=>root.querySelector(sel);
        return {
          el: root,
          ping: init.ping,
          load: init.load,     // model load in "system load" units ~1.1..2.6
          uptime: init.uptime,
          basePing: init.ping,
          elPing: q('[data-role="ping"]'),
          elLoad: q('[data-role="load"]'),
          elUp1:  q('[data-role="uptimeTxt"]'),
          elUp2:  q('[data-role="uptimeTxt2"]'),
          elBar:  q('[data-role="uptimeBar"]'),
          elStat: q('[data-role="status"]'),
          elStatTxt: q('[data-role="status-text"]'),
        };
      }

      function setOperational(s){
        s.elStat.classList.remove('ok','warn','danger');
        s.elStat.classList.add('ok');
        s.elStatTxt.textContent = 'Operational';
      }

      const A = bindServer(document.getElementById('srvA'), { ping:52, load:1.45, uptime:99.97 }); // Dallas
      const B = bindServer(document.getElementById('srvB'), { ping:58, load:1.20, uptime:99.91 }); // SF

      let t = 0;

      function stepPrimary(){
        t += 0.06;
        const hours = (Date.now()/3600000) % 24;
        const diurnal = 0.70 + 0.30 * Math.sin(((hours - 6) / 24) * Math.PI * 2); // daytime peak
        const wave    = 0.25 * Math.sin(t * 1.2);
        const burst   = Math.random() > 0.90 ? Math.random() * 0.50 : 0;

        const targetLoad = 1.25 + diurnal * 0.90 + wave + burst;    // ~1.2..2.6
        A.load += (targetLoad - A.load) * 0.18;
        A.load = clamp(A.load, 1.15, 2.60);

        const loadImpact = (A.load - 1.0) * 18;
        A.ping = clamp(A.basePing + (Math.random()*16 - 8) + loadImpact, 35, 140);

        A.uptime = clamp(A.uptime + (Math.random() > 0.985 ? -0.001 : 0.0001), 98.5, 100);
      }

      function stepBackup(){
        // Target 55–80% of primary, plus small independent variation, but always < primary
        const ratio   = 0.55 + Math.random() * 0.25;  // 0.55..0.80
        const base    = A.load * ratio;
        const wave    = 0.15 * Math.sin(t * 1.5 + 1.1);
        const micro   = (Math.random()*0.10 - 0.05);
        const burst   = Math.random() > 0.95 ? Math.random()*0.25 : 0;

        let desired   = base + wave + micro + burst;
        const cap     = Math.max(1.05, A.load - 0.06); // slight margin below primary
        desired       = Math.min(desired, cap);
        desired       = clamp(desired, 1.05, 2.40);

        B.load += (desired - B.load) * 0.20;
        B.load = Math.min(B.load, A.load - 0.05);
        B.load = clamp(B.load, 1.05, 2.40);

        const loadImpact = (B.load - 1.0) * 16;
        B.ping = clamp(B.basePing + (Math.random()*14 - 7) + loadImpact, 35, 130);

        B.uptime = clamp(B.uptime + (Math.random() > 0.985 ? -0.001 : 0.0001), 98.5, 100);
      }

      function paint(s){
        s.elPing.textContent = Math.round(s.ping);

        // Convert model load (max ~2.6) into a % so it reads like CPU usage
        const pct = Math.max(0, Math.min(100, Math.round(s.load / 2.6 * 100)));
        s.elLoad.textContent = pct + '%';

        const upTxt = fmt(s.uptime, 2) + '%';
        s.elUp1.textContent = upTxt;
        s.elUp2.textContent = upTxt;
        s.elBar.style.width = upTxt;
        setOperational(s); // lock to Operational
      }

      function tick(){ stepPrimary(); stepBackup(); paint(A); paint(B); }
      tick();
      setInterval(tick, 1000);
    })();

    /* Highcharts API chart (unchanged except styling) */
    (function(){
      const chart = Highcharts.chart('apiChart', {
        chart: { type:'areaspline', backgroundColor:'transparent' },
        title: { text: '', style:{ color:'#fff' } },
        credits: { enabled:false },
        legend: { enabled:false },
        xAxis: {
          type:'datetime',
          lineColor:'#333', tickColor:'#333',
          labels: { style:{ color:'#c0caf5' } }
        },
        yAxis: {
          title: { text: 'Requests/sec', style:{ color:'#c0caf5' } },
          gridLineColor:'#333',
          labels: { style:{ color:'#c0caf5' } },
          min:0
        },
        tooltip: {
          backgroundColor:'rgba(0,0,0,.9)',
          borderColor:'rgba(187,154,247,.6)',
          style:{ color:'#fff' },
          xDateFormat: '%I:%M:%S %p',
          shared:true
        },
        plotOptions:{
          areaspline:{
            fillColor: {
              linearGradient: { x1:0, y1:0, x2:0, y2:1 },
              stops: [
                [0, 'rgba(187,154,247,.4)'],
                [1, 'rgba(187,154,247,.05)']
              ]
            },
            lineWidth:2,
            marker:{ enabled:false }
          }
        },
        series: [{ name:'Requests', color:'#bb9af7', data:[] }]
      });

      // Randomized spikes & jitter
      const spikeInterval = Math.random() * 10000 + 8000; // 8–18s
      const spikeIntensity = Math.random() * 50 + 30;     // +30..80 req/s
      const baseOffset = Math.random() * 30 - 15;         // -15..+15
      let lastSpikeTime = Date.now() - spikeInterval;

      function val(t){
        const base = 120 + baseOffset + 40 * Math.sin(t/4500);
        const wave = 20 * Math.sin(t/2000);
        const jitter = Math.random() * 25;
        const timeSinceSpike = t - lastSpikeTime;
        let spike = 0;
        if(timeSinceSpike > spikeInterval && Math.random() > 0.7){
          spike = Math.random() * spikeIntensity;
          lastSpikeTime = t;
        }
        const burst = Math.random() > 0.92 ? Math.random() * 35 : 0;
        return Math.max(80, base + wave + jitter + burst + spike);
      }

      function tick(){
        const s = chart.series[0];
        const x = Date.now();
        const y = val(x);
        s.addPoint([x, y], true, s.data.length >= 60);
      }

      const now = Date.now();
      for(let i=59;i>=0;i--){ chart.series[0].addPoint([now - i*1000, val(now - i*1000)], false, false); }
      chart.redraw();
      setInterval(tick, 1000);
    })();
  </script>
</body>
</html>